<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MY MOVIES FUN - 12,000+ Movies</title>
    <style>
        :root { --main-green: #a2ff00; --bg-dark: #121212; --card-bg: #1e1e1e; }
        body { background-color: var(--bg-dark); color: white; font-family: sans-serif; margin: 0; padding: 0; }
        header { padding: 20px; text-align: center; border-bottom: 2px solid var(--main-green); }
        .logo { font-size: 24px; font-weight: bold; color: white; }
        .logo span { color: var(--main-green); }
        
        /* Search Box */
        .search-container { padding: 20px; text-align: center; }
        input[type="text"] { width: 60%; padding: 12px; border-radius: 5px; border: none; outline: none; }
        .btn-search { padding: 12px 25px; background: var(--main-green); border: none; cursor: pointer; font-weight: bold; border-radius: 5px; }

        /* Movie Grid */
        .movie-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(160px, 1fr)); gap: 15px; padding: 20px; }
        .movie-card { background: var(--card-bg); border-radius: 10px; overflow: hidden; text-align: center; border: 1px solid #333; transition: 0.3s; }
        .movie-card:hover { border-color: var(--main-green); transform: translateY(-5px); }
        .movie-card img { width: 100%; height: 230px; object-fit: cover; }
        .movie-card h3 { font-size: 14px; margin: 10px; height: 35px; overflow: hidden; }
        .badge { background: #2c3e50; color: var(--main-green); padding: 5px; font-size: 12px; border-radius: 3px; display: inline-block; margin-bottom: 10px; }

        /* Pagination Styling */
        .pagination-wrapper { margin: 40px 0; text-align: center; }
        .pagination-info { color: var(--main-green); margin-bottom: 15px; font-size: 18px; font-weight: bold; }
        .pagination-buttons { display: flex; flex-wrap: wrap; justify-content: center; gap: 5px; }
        .pagination-buttons button { background: #222; color: white; border: 1px solid #444; padding: 10px 15px; cursor: pointer; border-radius: 5px; min-width: 45px; }
        .pagination-buttons button.active { background: var(--main-green); color: black; font-weight: bold; border-color: var(--main-green); }
        .pagination-buttons button:hover:not(.active) { background: #444; }
        .dots { color: #777; padding: 10px; }

        footer { text-align: center; padding: 20px; border-top: 1px solid #333; font-size: 14px; color: #777; }
    </style>
</head>
<body>

<header>
    <div class="logo">MY MOVIES <span>FUN</span></div>
</header>

<div class="search-container">
    <input type="text" id="searchInput" placeholder="Search 12,000+ movies...">
    <button class="btn-search" onclick="searchMovies()">SEARCH</button>
</div>

<div id="movieGrid" class="movie-grid">
    </div>

<div class="pagination-wrapper">
    <div id="paginationInfo" class="pagination-info"></div>
    <div id="paginationButtons" class="pagination-buttons"></div>
</div>

<footer>© 2026 My Movies Fun - All Rights Reserved</footer>

<script>
    let allMovies = [];
    let filteredMovies = [];
    const moviesPerPage = 20;
    let currentPage = 1;

    // 1. Load Data from JSON
    async function loadData() {
        try {
            const response = await fetch('movies_data.json');
            allMovies = await response.json();
            filteredMovies = allMovies;
            
            // Back-button support: Check URL for page number
            const urlParams = new URLSearchParams(window.location.search);
            currentPage = parseInt(urlParams.get('page')) || 1;
            
            displayMovies(currentPage);
        } catch (error) {
            console.error("Error loading JSON:", error);
        }
    }

    // 2. Display Movies on Grid
    function displayMovies(page) {
        const grid = document.getElementById('movieGrid');
        grid.innerHTML = "";
        
        const start = (page - 1) * moviesPerPage;
        const end = start + moviesPerPage;
        const paginatedMovies = filteredMovies.slice(start, end);

        paginatedMovies.forEach(movie => {
            grid.innerHTML += `
                <div class="movie-card">
                    <img src="${movie.poster}" alt="${movie.title}" onerror="this.src='https://via.placeholder.com/160x230?text=No+Poster'">
                    <div class="badge">Hindi Dubbed</div>
                    <h3>${movie.title}</h3>
                    <button class="btn-search" style="width:90%; margin-bottom:10px;" onclick="window.location.href='${movie.url}'">Download</button>
                </div>`;
        });

        renderPagination(filteredMovies.length, page);
    }

    // 3. Smart Pagination Logic (1-10, 11-20...)
    function renderPagination(totalItems, page) {
        const totalPages = Math.ceil(totalItems / moviesPerPage);
        document.getElementById('paginationInfo').innerText = `Total Pages: ${totalPages}`;
        
        const container = document.getElementById('paginationButtons');
        container.innerHTML = "";

        if (page > 1) {
            container.innerHTML += `<button onclick="changePage(${page - 1})">← Prev</button>`;
        }

        // Calculate groups of 10
        let startPage = Math.floor((page - 1) / 10) * 10 + 1;
        let endPage = Math.min(startPage + 9, totalPages);

        for (let i = startPage; i <= endPage; i++) {
            container.innerHTML += `
                <button class="${i === page ? 'active' : ''}" onclick="changePage(${i})">${i}</button>`;
        }

        if (endPage < totalPages) {
            container.innerHTML += `<button onclick="changePage(${endPage + 1})">Next Group →</button>`;
            container.innerHTML += `<span class="dots">...</span>`;
            container.innerHTML += `<button onclick="changePage(${totalPages})">${totalPages}</button>`;
        }

        if (page < totalPages) {
            container.innerHTML += `<button onclick="changePage(${page + 1})">Next</button>`;
        }
    }

    // 4. Change Page & Update URL
    function changePage(pageNum) {
        currentPage = pageNum;
        const newurl = window.location.protocol + "//" + window.location.host + window.location.pathname + '?page=' + pageNum;
        window.history.pushState({path:newurl},'',newurl);
        displayMovies(pageNum);
        window.scrollTo({top: 0, behavior: 'smooth'});
    }

    // 5. Search Function
    function searchMovies() {
        const query = document.getElementById('searchInput').value.toLowerCase();
        filteredMovies = allMovies.filter(m => m.title.toLowerCase().includes(query));
        currentPage = 1;
        displayMovies(1);
    }

    loadData();
</script>

</body>
</html>
